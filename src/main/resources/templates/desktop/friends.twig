{# @pebvariable name="friendList" type="java.util.List<smithereen.data.User>" #}
{# @pebvariable name="owner" type="smithereen.data.User" #}
{# @pebvariable name="tab" type="String" #}
{%extends "page"%}
{%block content%}
{% include 'friends_tabbar' %}
<div class="summaryWrap">
	<div class="summary">
	{% set isSelf=currentUser is not null and currentUser.id==owner.id %}
	{% if tab=='mutual' %}
		{{ L('you_and_X_mutual', {'name': owner.firstAndGender, 'numFriends': totalItems}) }}
	{% elseif tab=='followers' %}
		{% if isSelf %}
			{{ L("summary_own_X_followers", {'count': totalItems}) }}
		{% else %}
			{{ L("summary_user_X_followers", {'name': owner.firstAndGender, 'count': totalItems}) }}
		{% endif %}
	{% elseif tab=='following' %}
		{% if isSelf %}
			{{ L("summary_own_X_follows", {'count': totalItems}) }}
		{% else %}
			{{ L("summary_user_X_follows", {'name': owner.firstAndGender, 'count': totalItems}) }}
		{% endif %}
	{% else %}
		{% if isSelf %}
			{{ L("summary_own_X_friends", {'numFriends': totalItems}) }}
		{% else %}
			{{ L("summary_user_X_friends", {'name': owner.firstAndGender, 'numFriends': totalItems}) }}
		{% endif %}
	{% endif %}
	</div>
	{% include "pagination" %}
</div>
<div class="singleColumn">
{% for friend in items %}
<table width="100%" class="friendsRow noBorderSpacing" id="frow{{friend.id}}">
	<tr valign="top">
		<td width="100">
			<a href="{{friend.profileURL}}">{{friend | pictureForAvatar('m')}}</a>
		</td>
		<td class="info">
			<div class="infoInner">
				<div class="grayText">{{ L('name') }}:</div>
				<div><a href="{{ friend.profileURL }}">{{ friend.completeName }}</a></div>
				{% if friend.domain is not empty %}
				<div class="grayText">{{ L('server') }}:</div>
				<div>{{ friend.domain }}</div>
				{% endif %}
			</div>
		</td>
		<td width="130">
			<ul class="actionList">
				<li><a href="/users/{{ friend.id }}/friends">{{L('view_friends_of')}}</a></li>
				{%if(currentUser is not null and currentUser.id==owner.id and not followers)%}
					<li>
						<a href="{{friend.getProfileURL('confirmRemoveFriend')}}" onclick="return ajaxConfirm({%if following%}'unfollow'{%else%}'remove_friend'{%endif%},this.getAttribute('data-confirm'),'{{friend.getProfileURL('doRemoveFriend')}}?from=list')" data-confirm="{{ L((following ? 'confirm_unfollow_X' : 'confirm_unfriend_X'), {'name': friend.firstLastAndGender}) | forceEscape }}">{%if following%}{{L('unfollow')}}{%else%}{{L('remove_friend')}}{%endif%}</a>
					</li>
				{%endif%}
                {%if friend.domain is not null%}
					<li><a href="{{ friend.url }}" target="_blank">{{ L('open_on_server_X', {'domain': friend.domain}) }}</a></li>
				{%endif%}
			</ul>
		</td>
	</tr>
</table>
{% else %}
<div class="emptyState">
	{% if tab=='followers' %}
	{{ L('no_followers') }}
	{% elseif tab=='following' %}
	{{ L('no_follows') }}
	{% else %}
	{{ L('no_friends') }}
	{% endif %}
</div>
{% endfor %}
</div>
<div class="bottomSummaryWrap">{% include "pagination" %}</div>
{%endblock%}