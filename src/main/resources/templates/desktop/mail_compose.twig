{% extends "page" %}
{% block content %}
{% include "mail_tabbar" with {'tab': 'compose'} %}
<div class="heavyBoxWrap">
	<div class="heavyBox mailMessageComposeForm">
		<form action="/my/mail/send" method="post" id="wallPostFormForm_mailMessage" data-required-fields="mailComposeToFld">
			<h4>{{ L('mail_to') }}</h4>
			<div id="mailComposeTo"></div>
			<input type="hidden" name="to" id="mailComposeToFld"/>
			<input type="checkbox" class="toggler" id="mailSubjectToggler"/>
			<div class="marginAfter marginBefore toggled">
				<label for="mailSubjectToggler" class="hideWhenOn link">{{ L('mail_specify_subject') }}</label>
				<div class="showWhenOn">
					<h4 id="subjectLabel">{{ L('mail_subject') }}</h4>
					<input type="text" name="subject" aria-labelledby="subjectLabel" class="subjectField"/>
				</div>
			</div>
		{% include "mail_message_form" %}
		</form>
	</div>
</div>
{% script %}
var friendList={{ json(friendList) }};
new TokenInput(ge("mailComposeTo"), "{{ L('friends_search_placeholder') }}", function(q){return TokenInput.filterTokens(q, friendList);}, ge("mailComposeToFld"));
{% endscript %}
{% endblock %}

